
@using Online_book_shop.Models;
@using Online_book_shop.Models.ViewModel;
@using Online_book_shop.Handlers.Helper;
@using Online_book_shop.Handlers.Business;
@{
    List<Publisher> publishers = ViewBag.publishers != null ? ViewBag.publishers : new List<Author>();
    int TotalNumberOfItems = ViewBag.TotalNumberOfBooks != null ? ViewBag.TotalNumberOfBooks : 0;

    ViewBag.Title = "Authors";
    // Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
<div class="blog-wrapper">
    <div class="container">
        @*<div class="pagination">
                <a class="prev">&lt;&lt; Previous</a>
                <div class="currentpage">1</div>
                <a class="Next">Next &gt;&gt; </a>
            </div>*@
        <div class="blog">
            @foreach (Publisher a in publishers)
            {
                Media m = a.ProfileImage;
                <div class="item">
                    @if (m != null && HTMLHelper.isImageExist("Content/UploadFiles/Images/ProfilePicture/" + m.FileName))
                    {
                        <div class="image" style="background-image:url('/Content/UploadFiles/Images/ProfilePicture/@m.FileName')">
                            <h3 class="padded-multiline">
                                <span>
                                    @a.Name
                                </span>
                            </h3>
                        </div>

                    }
                    else
                    {
                        <div class="image" style="background-image:url('/Content/UploadFiles/Images/ProfilePicture/c8811ace-0b4f-4213-a585-cf1bbbd562be.jpg')">
                            <h3 class="padded-multiline">
                                <span>
                                    @a.Name
                                </span>
                            </h3>
                        </div>


                    }
                        <div class="content">
                            @if (!string.IsNullOrEmpty(a.Description) && a.Description.Length > 200)
                            {
                                <p>
                                    @a.Description.Substring(0,200)
                                    <span class="find-more"><a href="/publisher/@a.Id">Find more</a></span>
                                </p>
                            }
                            else
                            {
                                <p>
                                    @a.Description
                                    <span class="find-more"><a href="/publisher/@a.Id">Find more</a></span>
                                </p>
                            }
                        </div>
                </div>
            }

        </div>
        @if (TotalNumberOfItems < 12)
        {
            int page = 0;
            if (Request.QueryString["page"] != null)
            {
                page = Convert.ToInt32(Request.QueryString["page"]);
            }
            <div class="pagination">
                @if (!(page == 0 || page == 1))
                {
                    <a class="prev" href="/author/collection&page=" @(page - 1)>&lt;&lt; Previous</a>
                }
                @if (page != 0)
                {
                    <div class="currentpage">@page</div>

                }
                @if (!(page * 12 == TotalNumberOfItems || (page + 1) * 12 > TotalNumberOfItems))
                {
                    <a class="Next" href="/author/collection&page=" @(page + 1)>Next &gt;&gt; </a>
                }
            </div>
        }
    </div>
</div>


